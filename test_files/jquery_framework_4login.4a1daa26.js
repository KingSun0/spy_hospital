if(typeof hdf=="undefined"){$(function(){$("input[type=submit],input[type=button]").addClass("my_submit_button").mouseover(function(){$(this).addClass("my_submit_button_mouseover")}).mouseout(function(){$(this).removeClass("my_submit_button_mouseover")});$.ajaxSetup({cache:false})});hdf={version:"1.0.1.2",cookie_default_domain:{domain:"haodf.com",path:"/"},set_cookie:function(e,t,i,o,r,n){var s=e+"="+encodeURI(t);if(i){now=new Date;now.setTime(now.getTime()+i*1e3);s+="; expires="+now.toGMTString()}if(!o||!r){o=this.cookie_default_domain.path;r=this.cookie_default_domain.domain}s+="; path="+encodeURI(o)+"; domain="+escape(r);if(n)s+="; secure";document.cookie=s;return true},get_cookie:function(e){if(typeof e!="string")return null;e=e.replace("[","\\[").replace("]","\\]");var t=document.cookie.match("(^|; )"+e+"=([^;]*)(;|$)");return t?t[2]:null},del_cookie:function(e){if(this.get_cookie(e)!=null)this.set_cookie(e,null,-86400);return true}};hdf_ui={ajaxMsg:function(e,t){if(!t)t={};if(t.id&&t.id[0]=="#")t.id=t.id.substr(1,t.id.length-1);if($(t.id).size()==0)t.id=false;if(!t.id)t.id="hdf_ajax_msg_"+Math.floor(Math.random()*1e8);if($("#"+t.id).size()==0){$(document.body).append('<div id="'+t.id+'" style="display:hidden;"></div>')}dialog_option={autoOpen:false,open:function(){$("#"+t.id).load(e)}};if(t.width)dialog_option.width=t.width;if(t.height)dialog_option.height=t.height;$("#"+t.id).dialog(dialog_option);$("#"+t.id).dialog("open")},mask:{opacity:.2,duration:500,layers:{},count:0,refreshSize:function(){var e=$(document).height();var t=$(window).height();if(t>e)e=t;var i=$(document).width();var o=$(window).width();if(o>i)i=o;mh=$("#hdf_ui_mask").height();mw=$("#hdf_ui_mask").width();if(mh!=e)$("#hdf_ui_mask").height(e);if(mw!=i)$("#hdf_ui_mask").width(i)},show:function(e){if(!e)e={};var t=$.isEmptyObject(this.layers)?false:true;if(typeof e.id=="undefined"){e.id="id"+this.count;this.count++}this.layers[e.id]=1;if(t)return;$(window).bind("resize scroll",this.refreshSize);if(e.duration==undefined)e.duration=this.duration;if(e.opacity==undefined)e.opacity=this.opacity;if($("#hdf_ui_mask").size()==0)$(document.body).prepend('<div id="hdf_ui_mask" style="left:0; top:0; position:absolute; z-index:9000; background-color:#000;"></div>');this.refreshSize();$("#hdf_ui_mask").stop().fadeTo(0,0).fadeTo(e.duration,e.opacity)},hide:function(e){if(!e)e={};if(typeof e.id=="undefined"){this.count--;e.id="id"+this.count}delete this.layers[e.id];if(!$.isEmptyObject(this.layers))return;if(e.duration==undefined)e.duration=this.duration;$("#hdf_ui_mask").fadeOut(e.duration);$(window).unbind("resize scroll",this.refreshSize)},raise:function(e,t){if(!t)t=0;$(e).attr("defaultzindex",$(e).css("z-index"));$(e).attr("raised",1);$(e).css("z-index",9999+parseInt(t))},sink:function(e){if($(e).attr("raised")){$(e).attr("raised",null);zindex=$(e).attr("defaultzindex");if(!zindex)zindex=1;$(e).css("z-index",zindex)}}}};$.extend({getUrlDomain:function(e){if(e.match(/^[a-zA-Z\.\-]+$/))return e;match=e.match(/^https?:\/\/([a-zA-Z\.]+)/);return match&&match.length>1?match[1]:""},isCrossDomain:function(e,t){if(!t)t=document.domain;domain=this.getUrlDomain(e);return true;return domain!=t},cross_domain_ajax:function(e){if(this.isCrossDomain(this.getUrlDomain(e.url))){e.dataType="jsonp"}this.ajax(e)}});$.fn.extend({defaultText:function(e,t){if(!e)return;$(this).attr("defaultText",e);$(this).focus(function(){if($(this).val()==$(this).attr("defaultText")){$(this).val("").css("color",typeof t=="object"&&typeof t.focusColor=="string"?t.focusColor:"black")}}).blur(function(){if($(this).val()==""||$(this).val()==$(this).attr("defaultText")){$(this).val($(this).attr("defaultText")).css("color",typeof t=="object"&&typeof t.color=="string"?t.color:"#999")}});if($(this).val()==e||!$(this).val())$(this).blur()},realText:function(){if($(this).val()==$(this).attr("defaultText"))$(this).val("")}});$(function(){$(":text,textarea").each(function(){var e=$(this).attr("defaultText");if(e)$(this).defaultText(e)});$("form").submit(function(){$(this).children(":text,textarea").realText()})});hdf_bubble_msg={option:{anchor_id:"logo",width:350,max_width:500,position:"fixed",show_close:true,show_arrow:true,align:"bottom",style:"orange",align_autofix:true,content_margin:5,close_timeout:0,click_close:false,arrow_offset_x:"center",arrow_offset_y:"center",pop_callback:null,close_callback:null,content_type:"html",modal:false},current_config:{},border:{blue:{path:"//i2.hdfimg.com/my/img/",margin:0,width:19,arrow_size:24,arrow_offset_x:40,arrow_offset_y:10,font_color:"#2899BF",background:"white",texture:"bubble_msg_blue.png",texture_v:"bubble_msg_blue_v.png",texture_h:"bubble_msg_blue_h.png"},orange:{path:"//i2.hdfimg.com/my/img/",margin:0,width:19,arrow_size:24,arrow_offset_x:40,arrow_offset_y:10,font_color:"#efb400",background:"white",texture:"bubble_msg_orange.png",texture_v:"bubble_msg_orange_v.png",texture_h:"bubble_msg_orange_h.png"},green:{path:"//i2.hdfimg.com/my/img/",margin:0,width:45,arrow_size:62,arrow_offset_x:40,arrow_offset_y:10,font_color:"#2899BF",background:"#e0f6c4",texture:"bubble_msg_green.png",texture_v:"bubble_msg_green_v.gif",texture_h:"bubble_msg_green_h.gif"},green_simple:{path:"//i2.hdfimg.com/my/img/",margin:0,width:3,arrow_size:0,arrow_offset_x:0,arrow_offset_y:0,font_color:"#000",background:"#FFF",texture:"bubble_msg_green_simple.gif",texture_v:"bubble_msg_green_simple.gif",texture_h:"bubble_msg_green_simple.gif"}},init:function(){this._preload()},pop:function(e,t){if(!this.ready){$(function(){hdf_bubble_msg.pop(e,t)});return}this.clear_timeout();if(!$.trim(e))return this.close_callback({status:false});$(document).unbind("click",hdf_bubble_msg.click);$(window).unbind("scroll resize",this._fix_position);config={};for(var i in this.option)config[i]=this.option[i];if(t==undefined)t={};for(var i in t)config[i]=t[i];var o=typeof this.current_config.style=="string"&&this.current_config.style==config.style?false:true;this.current_config=config;if(config.content_type=="ajax"){if(config.ajax_trigger&&typeof config.ajax_trigger=="function"){if(!config.ajax_trigger())return this.close_callback({status:false})}this.current_config.content_type="html";ajax_option={url:e,cache:false,context:this,scriptCharset:"UTF-8",success:function(t){if(typeof t=="object"){if(t.content){e=t.content}else{e=""}}else{e=t}return this.pop(e,this.current_config)},error:function(e,t,i){}};return $.cross_domain_ajax(ajax_option)}if(this.border[config.style]==undefined)config.style="blue";border=this.border[config.style];if(config.width<border.arrow_size+border.width*2)config.width=border.arrow_size+border.width*2;if(config.width>config.max_width)config.width=config.max_width;if(typeof config.anchor_id=="string"&&config.anchor_id[0]!="#")config.anchor_id="#"+config.anchor_id;anchor=$(config.anchor_id);anchor_offset=anchor.offset();if(!anchor_offset){anchor_offset=this._calc_fixed_anchor_offset();config.anchor_id="#hdf_bubble_msg_null_id",config.show_arrow=false;anchor=$("#hdf_bubble_msg_null_id")}if(o&&$("#bubble_msg").size()>0)$("#bubble_msg").empty().attr("id","");if($("#bubble_msg").size()==0){msg_html=$('<div id="bubble_msg" style="display: none; position: absolute; z-index: 999;"></div>');msg_block=$('<div style="clear:both; font-size:0px;"></div>');msg_block.append('<div style="float: left; background: url('+border["path"]+border["texture"]+") no-repeat; width: "+border.width+"px; height: "+border.width+'px;"></div>');msg_block.append($('<div id="bubble_msg_top" style="float: left; background: url('+border["path"]+border["texture_h"]+") repeat-x; height: "+border.width+'px;"></div>').append('<div id="bubble_msg_arrow_bottom" style="float: left; display:inline; background: url('+border["path"]+border["texture"]+") no-repeat scroll -"+border.width+"px  0px transparent; width: "+border.arrow_size+"px; height: "+border.width+'px;"></div>'));msg_block.append('<div style="float: left; background: url('+border["path"]+border["texture"]+") no-repeat scroll   -"+(border.width+border.arrow_size)+"px  0px transparent; width: "+border.width+"px; height: "+border.width+'px;"></div>');msg_html.append(msg_block);msg_block=$('<div id="bubble_msg_left" style="clear: both; overflow:hidden; background: url('+border["path"]+border["texture_v"]+') repeat-y left;"></div>');msg_block.append('<div id="bubble_msg_arrow_right" style="float:left; width: '+border.width+"px; height: "+border.arrow_size+"px; background: url("+border["path"]+border["texture"]+") no-repeat scroll 0px -"+border.width+'px transparent;"></div>');msg_block.append($('<div id="bubble_msg_right" style="float:right; overflow:hidden; background: url('+border["path"]+border["texture_v"]+') repeat-y right;"></div>').append($('<div id="bubble_msg_body" style="float:left; overflow:hidden; background:'+border.background+';"></div>').append($("<div></div>").append('<div id="bubble_msg_close" style="clear: both; float: right; line-height: 14px; font-size: 12px; margin-bottom:4px;"><a href="javascript:" target="_self" onclick="hdf_bubble_msg.close()" style="color: '+border.font_color+';">关闭</a></div><div id="bubble_msg_content" style="clear: both; word-break: break-all; text-align: left; margin:'+config.content_margin+'px;"></div>'))).append('<div id="bubble_msg_arrow_left" style="float:left; width: '+border.width+"px; height: "+border.arrow_size+"px; background: url("+border["path"]+border["texture"]+") no-repeat scroll -"+(border.width+border.arrow_size)+"px -"+border.width+'px transparent;"></div>'));msg_html.append(msg_block);msg_block=$('<div style="clear: both; font-size:0px;"></div>');msg_block.append('<div style="float: left; background: url('+border["path"]+border["texture"]+") no-repeat scroll 0px -"+(border.width+border.arrow_size)+"px transparent; width: "+border.width+"px; height: "+border.width+'px;"></div>');msg_block.append($('<div id="bubble_msg_bottom" style="float: left; background: url('+border["path"]+border["texture_h"]+") repeat-x bottom; height: "+border.width+'px;"></div>').append('<div id="bubble_msg_arrow_top" style="float: left; display:inline; background: url('+border["path"]+border["texture"]+") no-repeat scroll -"+border.width+"px -"+(border.width+border.arrow_size)+"px transparent; width: "+border.arrow_size+"px; height: "+border.width+'px;"></div>'));msg_block.append('<div style="float: left; background: url('+border["path"]+border["texture"]+") no-repeat scroll -"+(border.width+border.arrow_size)+"px -"+(border.width+border.arrow_size)+"px transparent; width: "+border.width+"px; height: "+border.width+'px;"></div>');msg_html.append(msg_block);$(document.body).append(msg_html);msg_html=null;msg_block=null;$("#bubble_msg_body").mouseover(function(){hdf_bubble_msg.mouseover()}).mouseout(function(){hdf_bubble_msg.mouseout()})}if(config.show_close){$("#bubble_msg_close").show();$("#bubble_msg_content").css("margin-top",config.content_margin-14>2?config.content_margin-14:2)}else $("#bubble_msg_close").hide();$("#bubble_msg").hide();$("#bubble_msg").css("width",config.width);$("#bubble_msg_top").css("width",config.width-border.width*2);$("#bubble_msg_bottom").css("width",config.width-border.width*2);$("#bubble_msg_left").css("width",config.width);$("#bubble_msg_right").css("width",config.width-border.width);$("#bubble_msg_body").css("width",config.width-border.width*2);$("#bubble_msg_arrow_top").hide();$("#bubble_msg_arrow_left").hide();$("#bubble_msg_arrow_right").hide();$("#bubble_msg_arrow_bottom").hide();$("#bubble_msg_content").html(e);config.height=0;var r=false;var n=false;while(!r){var s="null";var f="null";var l=0;var b=0;if(config.show_arrow){l=(config.width-border.width*2-border.arrow_size)/2;if(l>border.arrow_offset_x)l=border.arrow_offset_x;b=(config.height-border.width*2-border.arrow_size)/2;if(b>border.arrow_offset_y)b=border.arrow_offset_y}if(config.align.indexOf("top")>=0){s=anchor_offset.top-config.height-border.margin;if(config.height>0)r=true}if(config.align.indexOf("bottom")>=0){s=anchor_offset.top+anchor.height()+border.margin;r=true}if(config.align.indexOf("left")>=0){f=anchor_offset.left-config.width-border.margin}if(config.align.indexOf("right")>=0){f=anchor_offset.left+anchor.width()+border.margin}if(config.align=="center"){f=anchor_offset.left+anchor.width()/2-config.width/2;if(config.height>0){cacl_top=anchor_offset.top+anchor.height()/2-config.height/2;r=true}}if(s=="null"){if(config.height>0){s=anchor_offset.top-border.arrow_size/2-b-border.width+(config.arrow_offset_y=="center"?anchor.height()/2:config.arrow_offset_y);r=true}}if(f=="null"){f=anchor_offset.left-border.arrow_size/2-l-border.width+(config.arrow_offset_x=="center"?anchor.width()/2:config.arrow_offset_x)}if(f<0&&config.align_autofix&&(config.align=="top"||config.align=="bottom")){l+=f;if(l<0)l=0;f=0}if(f<0&&confirm.align!="bottom"&&config.align_autofix){config.align="bottom";r=false;continue}if(r){if(s<0&&config.align!="bottom"&&config.align_autofix){config.align="bottom";r=false}}else{if(!n){$("#bubble_msg").css("left",f).stop().show();config.height=$("#bubble_msg_body").height()+border.width*2;n=true}else{alert("消息无法正确定位");r=true}}}config.left=f;config.top=s;if(config.show_arrow){if(config.align=="top"||config.align=="bottom")$("#bubble_msg_arrow_"+config.align).css("margin-left",l).show();if(config.align=="left"||config.align=="right")$("#bubble_msg_arrow_"+config.align).css("margin-top",b).show()}if(this.current_config.modal){hdf_ui.mask.show();hdf_ui.mask.raise("#bubble_msg")}$("#bubble_msg").css("top",config.top).css("left",config.left).stop().show();if((config.align=="left"||config.align=="right")&&$("#bubble_msg_body").height()<border.arrow_size){$("#bubble_msg_body").height(border.arrow_size);config.height=$("#bubble_msg").height()}this.visible=true;if(typeof config.pop_callback=="function")config.pop_callback();this.set_timeout();setTimeout(function(){$(document).click($.proxy(hdf_bubble_msg.click,hdf_bubble_msg))},500);$(window).bind("scroll resize",$.proxy(this._fix_position,this));this._fix_position({immediately:true});return true},content:function(e){$("#bubble_msg_content").html(e)},close:function(e){this.clear_timeout();$(document).unbind("click",hdf_bubble_msg.click);$(window).unbind("scroll resize",this._fix_position);if(!e)e={};if($("#bubble_msg").css("display")&&$("#bubble_msg").css("display")!="none"){if(!e.immediately){if(this.current_config.modal){$("#bubble_msg").slideUp(function(){hdf_ui.mask.hide();hdf_ui.mask.sink("#bubble_msg")})}else{$("#bubble_msg").slideUp()}}else{$("#bubble_msg").hide();if(this.current_config.modal){hdf_ui.mask.hide();hdf_ui.mask.sink("#bubble_msg")}}this.visible=false;if(!e.status)e.status=true;this.close_callback(e)}},close_callback:function(e){if(this.current_config!=undefined&&typeof this.current_config.close_callback=="function"){this.current_config.close_callback(e)}},config:function(e){if(typeof e!="object")return;for(var t in e){this.option[t]=e[t]}},set_timeout:function(){if(this.current_config.close_timeout>0){this.timeout_handle=setTimeout($.proxy(this.close,this),this.current_config.close_timeout)}},clear_timeout:function(){if(this.timeout_handle)clearTimeout(this.timeout_handle);this.timeout_handle=null},mouseover:function(){this.clear_timeout();this.mouse_inside=true},mouseout:function(){this.set_timeout();this.mouse_inside=false},click:function(){if(this.current_config==undefined||this.current_config.click_close==undefined)return;rule=this.current_config.click_close;if(this.mouse_inside){if(rule=="all"||rule=="both"||rule==true||typeof rule=="string"&&rule.indexOf("inside")>=0)this.close()}else{if(rule=="all"||rule=="both"||rule==true||typeof rule=="string"&&rule.indexOf("outside")>=0)this.close()}},reposition:function(){h=this.current_config.height;w=this.current_config.width;ah=$("#bubble_msg").height();aw=$("#bubble_msg").width();if(h!=ah){this.current_config.height=ah;if(this.current_config.align.indexOf("top")>=0)this.current_config.top+=h-ah}if(w!=aw){this.current_config.width=aw;if(this.current_config.align.indexOf("left")>=0)this.current_config.left+=w-aw}this._fix_position()},_fix_position:function(e){if(this._is_global_pop()){if(typeof e=="object"&&typeof e.immediately!="undefined"||this.current_config.position=="fixed"){if($.browser.msie&&$.browser.version.indexOf("6")==0){var t=this.current_config.top+$(window).scrollTop();var i=this.current_config.left+$(window).scrollLeft();$("#bubble_msg").css({top:t,left:i})}else{if(config.align=="top-left"){$("#bubble_msg").css({left:"",top:"",bottom:"0px",right:"0px",position:"fixed"})}else{$("#bubble_msg").css({left:"",top:"",bottom:$(window).height()*.62-this.current_config.height,right:($(window).width()-this.current_config.width)/2,position:"fixed"})}}}else{var t=this.current_config.top+$(window).scrollTop();var i=this.current_config.left+$(window).scrollLeft();$("#bubble_msg").animate({top:t,left:i},{duration:600,queue:false})}}},_calc_fixed_anchor_offset:function(){if(this.current_config.align=="center"){anchor_offset={left:$(window).width()/2,top:$(window).height()*.38}}else{this.current_config.align="top-left";anchor_offset={left:$(window).width(),top:$(window).height()}}return anchor_offset},_is_global_pop:function(){return typeof this.current_config.anchor_id=="string"&&this.current_config.anchor_id=="#hdf_bubble_msg_null_id"},_preload:function(){for(var e in this.border){for(var t in this.border[e]){if(typeof this.border[e][t]=="string"&&t.indexOf("texture")==0){if($.browser.msie&&$.browser.version.indexOf("6")==0){this.border[e][t]=this.border[e][t].replace(".png",".gif")}$("<img>").attr("src",this.border[e].path+this.border[e][t])}}}},visible:false,ready:false};$(function(){hdf_bubble_msg.ready=true});$.fn.extend({bubble:function(e,t){if(typeof e=="object"){if(typeof e.config!="undefined"){hdf_bubble_msg.config(e.config)}if(typeof e.call!="undefined"&&typeof hdf_bubble_msg[e.call]=="function"){hdf_bubble_msg[e.call]()}return this}if(typeof t!="object")t={};t.anchor_id=this;hdf_bubble_msg.pop(e,t);return this},bubble_content:function(e){hdf_bubble_msg.content(e);return this},bubble_close:function(e,t){hdf_bubble_msg.close(e,t);return this},bubble_tooltip:function(e,t){$(this).mouseover(function(){$(this).bubble(e,t)});if(t.close_timeout==undefined||t.close_timeout==0){t.close_timeout=0;t.show_close=false;$(this).mouseout(function(){$(this).bubble_close(true)})}},bubble_focus:function(e,t){t.close_timeout=0;$(this).focus(function(){$(this).bubble(e,t)}).blur(function(){$(this).bubble_close(true)})},bubble_click:function(e,t){t.close_timeout=0;t.show_close=true;$(this).click(function(){$(this).bubble(e,t)})},bubble_visible:function(){return hdf_bubble_msg.visible}});hdf_bubble_msg.init();hdf_bubble_queue={requests:[],first_bubble_time:1e3,follow_bubble_time:5e3,timer_handle:null,enable:true,bubble_limit:0,bubble_count:0,register:function(e){if(!e||!e.emergency||!e.content)return;for(var t=0;t<this.requests.length;t++){if(e.content==this.requests[t].content){return this}}this.requests[this.requests.length]=e;return this},process:function(){if(!this.enable)return this;if($(document).bubble_visible()){this.start(this.follow_bubble_time);return this}this.clearTimer();for(var e=0;e<this.requests.length-1;e++){for(var t=e+1;t<this.requests.length;t++){if(this.requests[e].emergency<this.requests[t].emergency){var i=this.requests[t];this.requests[t]=this.requests[e];this.requests[e]=i}}}e=0;bubbled=false;while(e<this.requests.length&&!bubbled){var o;if(typeof this.requests[e].content=="function"){o=this.requests[e].content()}else{o=this.requests[e].content}if(o){if(typeof this.requests[e].anchor=="string"&&this.requests[e].anchor[0]!="#"){this.requests[e].anchor="#"+this.requests[e].anchor}if(!this.requests[e].option)this.requests[e].option={};this.requests[e].option.close_callback=function(e){if(e&&!e.status){hdf_bubble_queue.start(10)}else{hdf_bubble_queue.start(hdf_bubble_queue.follow_bubble_time)}};$(this.requests[e].anchor).bubble(o,this.requests[e].option);bubbled=true;this.bubble_count++;if(this.bubble_limit>0&&this.bubble_count>=this.bubble_limit){this.stop()}if(typeof this.requests[e].callback=="function"){this.requests[e].callback()}break}e++}if(bubbled){this.requests.splice(e,1)}else{this.start(this.follow_bubble_time)}return this},start:function(e){if(!e)e=this.first_bubble_time;this.clearTimer();this.timer_handle=setTimeout("hdf_bubble_queue.process()",e);return this},stop:function(){this.clearTimer();this.enable=false;return this},clear:function(){this.requests=[]},clearTimer:function(){if(this.timer_handle!=null){clearTimeout(this.timer_handle);this.timer_handle=null}return this},setLimit:function(e){this.bubble_limit=e;return this},setInterval:function(e){if(e<=500)e=500;this.follow_bubble_time=e;return this}};$(function(){hdf_bubble_queue.start()});bubble=hdf_bubble_queue}
